# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

### Вопрос 

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

1. Электронные чеки в json виде
2. Склады и автомобильные дороги для логистической компании
3. Генеалогические деревья
4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
5. Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ

1. Документо-ориентированная БД, т.к. внутренняя структура БД будет очень похожа на json.
2. Сетевая или Графовая БД. В последнем случае ребро (отношение) может быть параметром расстояния между складами и т.п.
3. Иерархическая БД. Имеет такую же древовидную структуру как и генеалогическое дерево. Каждый "узел" (ребенок) имеет двух "потомков" (отца и мать).
4. БД на основе пар "ключ-значение". 
5. Реляционная БД - классический подход. 

## Задача 2

### Вопрос

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись).
2. При сетевых сбоях, система может разделиться на 2 раздельных кластера.
3. Система может не прислать корректный ответ или сбросить соединение.

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ

1. Данные могут быть какое-то время не согласованы (пока идет запись изменений). Т.к. упомянута асинхронность (система продолжает отвечать в процессе синхронизации), можно сделать вывод, что это AP-система - доступная и устойчивая к разделению, но данные могут быть не согласованны. 
2. Как понял, имеется в виду "разделиться"="развалиться". Т.е. предполагается СА-система - доступная система и согласованная, но не устойчивая к разделению.
3. CP-система - система может быть не доступна, но при этом согласованная и устойчива к разделению.

Согласно PACELC-теореме:

1. PA/EL
2. PC/EC
3. PC/EL


## Задача 3

### Вопрос 

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ 

Не могут, т.к. BASE - принцип, противопоставляющий себя ACID. BASE подходит для высоконагруженных систем, для которых скорость ответа важнее согласованности данных. ACID же требует корректности данных в любой момент времени.


## Задача 4

### Вопрос

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ

Это система Redis. 

Плюсы:
- за счет хранение данных в RAM обеспечивается быстродействие,
- Поддерживает расширенные типы данных
- простота интеграции. 

Минусы: 
- Требовательность к ресурсам, т.к. все данные должны храниться в RAM,
- Могут быть утеряны данные, которые хранятся в RAM и еще не были записаны на диск,
- Нужно учитывать, что это NoSQL БД, не под все задачи подходит,
- Отсутствует механизм контроля доступа к данным,
- Однопоточный.





